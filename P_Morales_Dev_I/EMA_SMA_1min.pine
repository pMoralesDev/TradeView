// This Pine ScriptÂ® code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© pmoralesdev

//@version=6
indicator("EMA9_SMA_1min", overlay=false)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ“Œ INPUTS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
group_ma = "ðŸ”¹ MEDIAS"
EMA   = input.int(9, "Longitud EMA (1min)", minval=1, group=group_ma)
D_SMA = input.int(200, "Longitud SMA D", minval=1, group=group_ma)

group_app = "ðŸ”¹ Appearance"
emaColor    = input.color(#FFFFFF, "Color EMA", group=group_app)
trendColor  = input.color(#00BFFF, "Color SMA", group=group_app)
signalColor = input.color(#FFFFFF, "Color seÃ±ales", group=group_app)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ“ˆ CORE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ema_cross = ta.ema(close, EMA)
sma_trend = ta.sma(close, D_SMA)

// SeÃ±ales SOLO al cierre (cruce EMA vs SMA)
bullSignal = barstate.isconfirmed and ta.crossover(ema_cross, sma_trend)
bearSignal = barstate.isconfirmed and ta.crossunder(ema_cross, sma_trend)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸŽ¨ PLOTS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
plot(ema_cross, title="EMA seÃ±al", color=color.new(emaColor, 0), linewidth=2)
plot(sma_trend, title="SMA tendencia", color=color.new(trendColor, 0), linewidth=2)

plotchar(bullSignal ? ema_cross : na, "BUY", "â–²", location.absolute, signalColor, size=size.tiny)
plotchar(bearSignal ? ema_cross : na, "SELL", "â–¼", location.absolute, signalColor, size=size.tiny)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ðŸ”” ALERTAS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
sym = syminfo.ticker

if bullSignal
    alert(sym + " BUY EMA9 > SMA", alert.freq_once_per_bar_close)

if bearSignal
    alert(sym + " SELL EMA9 < SMA", alert.freq_once_per_bar_close)

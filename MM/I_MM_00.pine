// This Pine Scriptâ„¢ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// Â© PMoralesDev

//@version=6
indicator("I_MM_00", shorttitle="PMoraleDev_MediasMÃ³viles_SignalAlerts", overlay=true)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ğŸ“Œ INPUTS
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

//ğŸ”¹ MEDIASğŸ”¹
emaLen = input.int(50,  "Longitud EMA", group = "ğŸ”¹ MEDIAS")
smaLen = input.int(200, "Longitud SMA", group = "ğŸ”¹ MEDIAS")

//ğŸ”¹ TIMEFRAMESğŸ”¹ 
tEntry = input.timeframe("1",  "Entradas", group="ğŸ”¹ TIMEFRAMES")
tTrend = input.timeframe("15", "Tendencia", group="ğŸ”¹ TIMEFRAMES")

//ğŸ”¹ APPARENCEğŸ”¹ 
green = input.color(#00ffbb, "Bullish Color", group="Appearance")
red   = input.color(#ff1100, "Bearish Color", group="Appearance")

//ğŸ”¹ CONSTANTSğŸ”¹ 
var int trend = 0
var bool alignedBullish = false
var bool alignedBearish = false
var bool position = false


// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ğŸ“ˆ CORE
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
emaEntry = request.security(syminfo.tickerid, tEntry, ta.ema(close, emaLen))
smaEntry = request.security(syminfo.tickerid, tEntry, ta.sma(close, smaLen))
emaTrend = request.security(syminfo.tickerid, tTrend, ta.ema(close, emaLen))
smaTrend = request.security(syminfo.tickerid, tTrend, ta.sma(close, smaLen))

if emaTrend > smaTrend
    trend := 1

if emaTrend < smaTrend
    trend := -1

if trend == 1 and not position
    if ta.crossover(emaEntry, smaEntry)
        label.new(bar_index, high, "Long Entry", style=label.style_label_up, color=color.new(green, 0), textcolor=color.black, size=size.small)
        position := true
        alignedBullish := true
    if ta.crossunder(emaEntry, smaEntry)
        position := false
        alignedBullish := false

if trend == -1 and not position
    if ta.crossunder(emaEntry, smaEntry)
        label.new(bar_index, low, "Short Entry", style=label.style_label_down, color=color.new(red, 0), textcolor=color.black, size=size.small)
        position := true
        alignedBearish := true
    if ta.crossover(emaEntry, smaEntry)
        position := false
        alignedBearish := false

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ğŸ¨ SeÃ±ales en grÃ¡fico
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

bullEntry = trend == 1 and not position and ta.crossover(emaEntry, smaEntry)
bearEntry = trend == -1 and not position and ta.crossunder(emaEntry, smaEntry)

plotchar(bullEntry ? low : na,, "Bullish Trend", "â–²", location.absolute, green, size=size.tiny)
plotchar(bearEntry ? high : na, "Bearish Trend", "â–¼", location.absolute, red, size=size.tiny)